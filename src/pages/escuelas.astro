---
import "@/assets/css/main.css"

import HeroEscuela from "@/components/escuela/HeroEscuela.astro";
import Footer from "@/components/generics/Footer.astro";
import Layout from "@/layouts/Layout.astro";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
const escuelas = await getCollection('escuelas')
console.log(escuelas)
---


<Layout>
    <HeroEscuela/>
    <div class="container mx-auto my-[8rem] space-y-[8rem]">
        {
            escuelas.map(escuela => (
                <div>
                    <div class="flex flex-col lg:flex-row gap-12 mb-10">
                        <Image class="w-full lg:w-[40%] order-2 lg:order-1 h-[95%] object-cover" src={escuela.data.imgSrc} alt={escuela.data.title}/>
                        <div class="w-full lg:w-[60%] order-1 lg:order-2 space-y-10">
                            <h2 class="text-45 font-semibold">{escuela.data.title}</h2>
                            <p class="text-20">{escuela.data.description}</p>
                            <p class="text-redGRG text-30 font-semibold">Conoce Nuestros Programas</p>
                        </div>
                    </div>
                    <div class="splide" id="splideProgramas1" role="group" aria-label="Splide Basic HTML Example">
                        <ul class="splide__pagination"></ul>
                        <div class="splide__track">                        
                            <ul class="splide__list"> 
                                
                                    {
                                        escuela.data.programas.map(programa => (
                                            <li class="splide__slide">
                                                <div class="bg-grayExtra p-4 space-y-4 h-full">
                                                    <p>{programa.title}</p>
                                                    <p>{programa.description}</p>
                                                    <a href="" target="_blank" rel="noopener noreferrer" class="text-redGRG font-semibold border-b border-b-redGRG ">¡Conoce más aquí!</a>
                                                </div>
                                            </li>
                                        ))
                                    }
                                
                            </ul>
                        </div>
                    </div>
                </div>
            ))
        }
    </div>

    <Footer/>
    
</Layout>


<script>
    import "@splidejs/splide"
    import '@splidejs/splide/css';

    import Splide from "@splidejs/splide";
    var elms = document.getElementsByClassName( 'splide' );

    for ( var i = 0; i < elms.length; i++ ) {
        new Splide( elms[ i ],{
            perPage: 2,
            gap: "5rem",
            perMove: 1,
            breakpoints: {
                769: {
                    perPage: 1,
                },
                
            }
        } ).mount();
    }
</script>